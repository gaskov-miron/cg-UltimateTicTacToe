import sys
import numpy as np
import copy
import random


t = '483-467|347-599|363-590|218-764|487-513|207-734|494-506|N460-503|410-459|299-657|188-812|347-529|499-501|230-729|271-685|130-870|372-628|183-817|N323-556|389-563|238-762|398-511|521-479|300-700|742-258|482-518|323-677|505-436|661-339|310-690|X318-651|214-786|401-526|189-754|118-882|258-742|441-542|250-750|621-337|123-877|326-674|N257-743|106-809|292-619|616-305|212-649|X110-890|117-883|90-823|267-733|130-870|521-479|115-885|125-875|131-869|145-855|N128-872|109-891|138-862|57-765|293-675|234-766|524-476|255-745|240-760|246-754|503-497|245-755|X478-458|219-622|738-262|310-690|119-881|513-487|235-765|N522-478|342-590|121-757|519-481|484-439|375-625|758-242|255-620|263-737|507-493|674-242|301-495|X254-746|150-850|339-661|239-742|129-871|309-654|355-645|238-762|495-505|151-849|249-751|N251-749|219-781|265-735|501-499|379-552|X472-484|224-595|724-215|379-504|149-721|630-282|466-443|760-240|99-811|537-463|N501-499|180-630|375-384|314-443|NNNNNNNNNNNNNNNNNX358-527|132-698|609-332|248-752|137-863|488-512|446-435|131-631|741-259|260-740|129-871|524-476|245-755|N503-497|229-771|116-752|525-475|459-428|135-615|760-240|198-598|137-739|519-481|553-241|115-509|X502-498|298-702|710-290|447-521|248-752|614-330|766-234|470-530|733-267|250-750|488-512|N490-510|502-498|500-500|848-152|753-117|X216-780|125-875|330-670|152-848|N304-696|309-672|261-739|352-648|512-488|235-765|336-478|260-740|523-477|629-323|239-672|X125-849|N259-676|259-741|N386-614|231-769|N378-425|491-509|N391-609|384-616|394-606|511-489|474-526|NNNNNNNNN395-531|261-739|571-314|255-745|250-750|230-770|643-357|251-749|XNNNNNN240-760|N494-506|243-757|N257-743|483-517|NXNNN510-490|239-569|566-241|136-647|241-759|125-510|615-239|255-489|X470-514|261-739|642-358|330-670|N626-374|663-308|535-465|766-234|240-687|N491-361|489-511|N765-235|739-261|764-236|741-259|52-823|446-490|125-733|0-891|254-616|419-540|237-763|655-345|108-892|248-752|117-883|N260-740|265-735|255-745|257-743|64-696|608-249|129-601|0-750|222-491|625-375|264-736|XN309-691|123-843|N257-685|251-749|N524-476|123-877|N262-738|131-869|N256-744|245-755|N253-747|259-741|N507-493|126-819|N262-622|488-512|NX131-612|443-476|120-665|0-766|245-578|442-470|248-516|635-365|148-822|149-851|236-764|127-873|N248-752|239-761|224-776|260-740|399-415|116-415|651-174|127-461|0-512|241-358|617-201|263-324|X0-902|265-735|0-911|0-946|0-854|242-758|0-863|505-495|NNNNNNNN0-785|516-484|0-815|0-873|0-769|484-516|0-756|XNNNNNNNNNNNNNNNNNNNNNNNNNX0-796|239-620|0-789|0-873|0-759|241-653|0-746|492-508|NNNNNNNNN261-448|0-616|504-241|0-626|0-748|0-479|491-267|0-485|X242-758|609-391|245-600|0-830|511-375|652-279|507-493|784-216|242-758|477-523|242-758|N494-506|542-458|481-519|521-479|130-649|743-257|271-426|0-622|484-269|720-280|508-492|XN623-377|238-708|N520-344|504-496|N756-244|256-744|N484-516|252-748|N498-502|496-504|N513-487|378-622|N745-255|237-631|N498-256|505-495|NX242-451|633-367|260-502|0-603|479-399|628-250|499-260|748-252|310-623|276-724|450-550|258-742|N511-489|489-511|501-499|492-508|240-263|753-247|242-246|0-250|484-246|764-236|490-251|X304-696|241-759|550-450|551-449|304-696|700-300|247-753|345-655|N350-650|392-608|264-736|379-621|492-508|736-264|507-493|570-230|767-233|502-498|XN258-742|N358-462|339-661|N700-300|N328-611|119-820|N264-609|263-737|N375-625|515-485|N759-241|484-516|N494-248|483-517|NX624-376|628-372|499-501|612-388|691-309|635-365|739-261|527-473|487-513|500-500|503-497|N492-508|495-505|501-499|501-499|766-234|756-244|739-261|744-256|751-249|740-260|773-227|X247-753|250-750|260-740|358-642|256-744|510-490|NNNNNNN484-516|750-250|509-491|503-497|739-261|494-506|XN240-760|N228-772|234-766|N480-520|NNNNNNNN523-477|N741-259|497-503|N510-490|484-516|NX251-749|242-758|270-730|248-752|376-624|239-761|500-500|NNNNNNNNN487-513|721-279|469-531|496-504|482-518|771-229|464-536|X512-488|477-523|749-251|740-260|475-525|723-277|496-504|734-266|N731-269|736-264|510-490|739-261|469-531|743-257|513-487|760-240|762-238|496-504|XN254-626|N494-243|504-496|N748-252|N601-270|273-596|N502-254|495-505|N747-253|N733-267|517-483|N490-242|513-487|NXXXXXXXXXXXXNXXXXXXXXXXXX209-791|121-879|344-656|265-735|128-818|502-498|0-930|271-729|N231-769|0-859|237-763|507-493|375-625|X512-488|132-506|756-244|0-829|498-502|274-726|N503-497|174-635|0-624|497-503|235-529|764-236|314-629|264-611|490-510|239-373|XNNNNNNNNNNNNNNX388-437|0-599|746-254|0-874|550-450|NNN267-733|0-765|515-485|0-743|532-468|NNN497-239|0-489|X439-561|256-744|605-395|497-503|250-612|751-249|0-892|510-490|N510-490|0-732|485-515|763-237|776-224|X235-362|774-226|0-751|510-490|258-742|N500-500|0-497|506-494|492-263|785-215|629-242|494-240|749-251|517-217|X474-526|476-524|486-514|735-265|N494-506|491-363|743-257|754-246|509-491|XNNN0-882|495-505|NN0-753|484-516|495-505|NXXXNXXXXXX0-937|255-745|N235-765|0-865|239-761|0-804|478-522|0-892|238-762|0-723|X114-886|N253-747|118-882|N249-751|N493-507|126-874|N246-754|526-474|NX101-795|0-733|247-753|0-631|473-527|136-745|0-759|263-737|504-496|0-520|XNNNNNN0-885|509-491|NN0-771|XNNNNNNNNNNNNNXNNN0-739|500-500|NNN500-500|0-499|X0-862|504-496|N524-476|0-753|492-508|0-741|501-499|0-729|484-516|0-765|X247-753|N487-513|252-748|N508-492|N509-491|248-752|N524-476|501-499|NX226-512|0-493|481-519|0-482|482-518|229-496|0-485|537-463|0-514|X262-738|256-744|N253-747|249-751|243-757|486-514|505-495|485-515|504-496|XN245-755|N268-732|141-859|N235-765|N524-476|477-523|N469-531|505-495|512-488|N519-481|481-519|496-504|500-500|512-488|503-497|NNNNNN484-516|495-505|NN495-505|XNNNNNNNN509-491|NN483-517|NXNNNNNNNN507-493|512-488|NNN485-515|X473-527|472-528|N504-496|495-505|479-521|N487-513|N494-506|237-763|N477-523|XXXNXXXX489-443|750-250|495-505|494-506|504-380|X500-500|505-495|480-520|545-455|X511-248|X0-867|484-516|NN0-759|XNNNNX0-523|XXXXXXXXXXXXXX243-757|N510-490|244-264|624-0|N274-479|122-121|0-238|N0-750|484-516|NN0-476|524-0|0-766|0-503|NN0-257|0-496|0-0|0-762|XNX0-496|X113-887|132-868|N133-867|250-750|257-743|498-502|66-540|XN0-880|N248-752|N501-499|N0-626|NX239-761|251-749|266-734|254-746|106-515|254-746|XNNNNNN502-498|0-621|XNNNNN516-484|N0-757|NXNNN487-513|N0-492|NX256-744|235-765|N235-765|493-507|537-463|126-529|XN0-735|N500-500|NN0-474|NX497-503|521-479|493-507|502-498|502-498|485-515|XNNNNNN531-469|0-747|XNNNNNN123-761|504-496|0-763|0-500|261-739|XNNNNNNNNXNNNNNNN475-525|N0-496|NXNNNNNN496-504|0-519|XNNNNNN274-481|0-482|0-513|513-487|X494-506|482-518|N502-498|495-505|499-501|507-493|XNNNNNN0-496|XXXNXXXXX499-501|506-494|483-517|520-359|507-493|X491-509|XNNNN0-739|NXNXXXXXXXNNNNN520-480|518-482|505-495|517-483|XXNXN489-511|497-503|NNNNNNNNNXXNXNXNNXNXNNNNNXXXXX136-114|N0-245|251-496|471-529|0-242|N0-510|N0-0|N0-493|NXNNNNNXNNNNNXNNNNNXNNNNNXNNNNNXNNNNNNNNNNNNNNNNXXXX483-517|504-496|468-532|534-466|NNNNXXXX0-529|0-461|0-0|495-505|508-492|NNSNNNSS487-513|NX'


A, a0, B, b0 = (np.array([[-1.84834721e-01,  4.32378762e-01, -2.05520763e+00,
         -8.32437364e-01,  1.62744210e+00,  4.37121377e-02,
         -2.52631146e-01,  5.08553984e-01, -7.58740854e-01,
          7.48051650e-01,  3.54510575e-01, -3.56798326e-01,
          1.54744199e+00,  7.56643544e-02, -1.33940394e+00],
        [-2.45000272e+00, -4.52122365e-03,  2.32988001e-01,
          1.30274766e-01,  1.20177089e+00, -6.05769774e-01,
          5.26674410e-02,  6.80504792e-01, -9.46485497e-01,
          1.14875842e+00, -1.38329209e+00,  6.07183918e-02,
          2.90414317e+00, -2.08283916e+00, -2.09025395e+00],
        [-1.09388192e+00,  9.39480326e-01,  1.77353913e+00,
          4.28807274e-01, -2.40283003e-01, -5.69552389e-01,
         -1.32312064e+00, -5.59905303e-01, -1.05224430e+00,
         -6.75547157e-01, -1.21186415e-01,  4.97150153e-01,
          2.24274479e+00,  4.23154093e-01, -2.22144701e+00],
        [ 9.67672181e-01, -4.90993238e-01, -7.55212140e-01,
         -7.64980731e-01, -6.65817062e+00, -1.95645341e+00,
         -2.29728101e-01, -2.21312492e-01, -1.97499785e-01,
          2.66790309e-02, -5.20148507e-01,  8.76040322e-01,
          3.05229166e-01,  1.34820573e+00, -7.89610648e-01],
        [ 1.11427457e+00, -7.14723431e-01, -1.22910455e+00,
          9.46861536e-01, -1.28233059e+00, -1.44323191e+00,
         -4.43184850e-01,  3.37329106e-01, -5.85208475e-01,
         -1.35759448e+00,  1.06972403e-01, -7.05655758e-01,
         -9.74135636e-01, -3.59006437e-01,  1.37071343e+00],
        [-6.33673135e-01,  9.53602316e-01, -2.52289624e-01,
          9.55761193e-01, -3.16595372e+00, -2.38064531e+00,
          1.34885777e+00,  6.47214538e-01, -2.43869863e-01,
          2.52082980e-02,  3.73778637e-01,  4.91950706e-01,
          1.15205501e+00, -2.61833703e+00,  2.17689115e-01],
        [-1.33702823e+00,  3.75485207e-01, -4.01943694e-01,
         -1.25298255e+00,  1.96392373e-01,  1.24288821e+00,
          3.48988304e-01,  1.91544603e-01, -8.74450048e-01,
         -1.78087676e+00,  1.63276737e+00,  9.58940506e-01,
          3.69356476e-01, -5.08589070e+00, -3.44950673e+00],
        [ 3.06269169e-01, -6.67669629e-01,  6.85450389e-02,
         -2.91349707e-02,  2.19080802e+00, -1.49283290e+00,
          1.12932139e-01, -1.70087557e+00, -1.40510707e+00,
          1.00605772e+00, -1.35501173e+00,  3.01918605e-01,
         -2.01649128e-01,  1.37139072e+00, -3.80844083e+00],
        [-4.94992389e-01,  8.28109473e-01, -4.81450731e-01,
          8.15309863e-01, -2.03953346e-01,  7.86066466e-01,
         -1.66766860e-01,  4.43286445e-01, -1.46085346e+00,
          5.62786900e-01, -7.33932749e-02, -1.01352819e+00,
         -3.34521015e-01,  3.51728121e-02, -7.27236750e-01],
        [-1.59499346e+00,  1.12809827e+00,  1.11699277e-01,
          1.08660218e+00, -1.26332747e+00, -4.17953559e-01,
         -4.37424852e-01, -2.15505948e-01,  6.87626498e-01,
         -6.31106065e-01, -7.26572497e-01,  9.39055612e-01,
         -7.56946478e-01, -2.27520362e+00, -1.32413008e+00],
        [ 2.95319457e-01, -2.01304549e-01,  7.72714896e-01,
         -6.10201953e-01, -2.69365275e+00, -2.56214271e+00,
         -3.14642631e-01, -5.18100062e-01,  2.52214504e-02,
          1.12321857e-01,  4.28401521e-01, -3.63274324e-01,
         -1.42736213e+00,  1.57547819e+00, -5.14309852e-01],
        [ 1.62633069e+00, -8.66449989e-01,  1.83106197e+00,
         -4.86249801e-01, -1.08642597e+00, -4.74665171e-01,
          7.22306342e-01, -2.39952631e-01,  5.05627338e-01,
          1.38143812e+00, -9.39888199e-01, -6.12901484e-02,
         -1.00262001e+00,  3.96162341e+00, -1.62024528e+00],
        [-8.64685580e-01, -1.99970904e-01, -2.06684848e+00,
          7.92827564e-01,  8.56942030e-01,  2.24345721e+00,
          9.32951324e-02,  9.47529690e-01,  1.04553302e+00,
         -4.00255605e-01, -5.13875953e-01, -4.99946776e-01,
          1.36695492e+00, -1.56023894e+00, -2.01449128e-01],
        [-9.84141438e-01,  7.18473976e-01,  1.65970965e+00,
         -5.40954441e-01,  4.22394886e-01,  8.81382169e-01,
          6.94225940e-01, -1.04608679e+00,  1.48206585e+00,
          6.92014180e-01,  2.13021642e+00,  8.55406380e-02,
          1.91247641e+00, -7.83959827e-01,  8.47825480e-01],
        [-1.13822490e+00, -7.63090105e-01,  8.62473053e-01,
          4.25988601e-01, -4.33702770e-01,  5.40886099e-01,
         -4.81453722e-01,  3.53094100e-02,  7.48999864e-01,
         -9.89491899e-01,  6.04379599e-01, -1.07939916e+00,
          1.12348712e+00, -2.18715186e+00,  7.29985274e-01],
        [ 4.80304083e-01,  6.78938239e-01, -1.26343189e+00,
          7.02165522e-01,  1.39425974e+00,  2.49846046e+00,
         -3.87171722e-01, -6.38563324e-01,  1.26689143e+00,
          5.22451885e-02,  8.32185769e-01, -5.42849729e-01,
          1.06369150e-01, -1.71002786e+00,  2.12635629e+00],
        [ 4.71492709e-01, -5.68242416e-01,  1.66733285e+00,
         -4.96219166e-01,  1.54671418e+00, -9.30760865e-01,
          3.54093360e-01, -4.45145951e-01,  1.82720703e-01,
         -1.01526850e-01,  3.16640590e-01, -5.24292476e-01,
          5.50602495e-01,  9.29870101e-01,  6.02596174e-01],
        [-9.38906667e-01, -6.38049319e-01,  3.71923407e-01,
          7.62081234e-03, -3.20908538e-01, -2.25248220e-01,
          9.03528476e-01,  2.48655025e-01,  1.18579888e+00,
         -1.43999980e-04, -5.66571310e-01,  9.51212828e-01,
          7.58708256e-01, -1.09625674e+00,  4.90624246e+00]]),
 np.array([[-1.69899984, -0.39505358, -4.72586058, -0.69713573, -3.33498621,
         -2.87573932, -0.28722948,  0.6391704 ,  0.67391841,  0.07564331,
         -0.38297717, -0.03953736,  1.77474052, -0.22694284, -2.24434687]]),
 np.array([[ 1.49141293],
        [-1.0392404 ],
        [-1.01859836],
        [ 0.97597567],
        [ 1.18554929],
        [-2.20241651],
        [-0.88665162],
        [ 0.96590064],
        [-1.2383273 ],
        [ 0.82528512],
        [ 1.19274456],
        [ 1.15628233],
        [ 1.21378378],
        [-0.49853564],
        [-0.644332  ]]),
np.array([-1.91956878]))


def get_map_(index):
    map_ = np.array([[ -1,  -1,  -1],
                     [ -1,  -1,  -1],
                     [ -1,  -1,  -1]])
    b = ''
    while index > 0:
        b = b+str(index % 3)
        index = index // 3
    b = b+(9-len(b))*'0'
    for i in range(3):
        for j in range(3):
            map_[j, i] = int(b[j+i*3]) - 1

    return map_


def get_Xchances_Ochances(map_):
    X_chances = np.array([[-1.0, -1.0, -1.0],
                          [-1.0, -1.0, -1.0],
                          [-1.0, -1.0, -1.0]])
    O_chances = np.array([[-1.0, -1.0, -1.0],
                          [-1.0, -1.0, -1.0],
                          [-1.0, -1.0, -1.0]])
    for i in range(3):
        for j in range(3):
            ID = get_index(map_[i * 3:(i + 1) * 3, j * 3:(j + 1) * 3])
            Pw = gg[ID][0]
            Pl = gg[ID][1]

            X_chances[i, j] = float(Pw)
            O_chances[i, j] = float(Pl)
    return X_chances, O_chances


def get_common_chances(common_map, X_chances, O_chances):
    current_winner = winner(common_map)
    if current_winner == 1:
        return 1
    if current_winner == 0:
        return -1
    X = np.hstack((X_chances.ravel(), O_chances.ravel()))
    Z = 1 / (1 + np.exp(-a0 - X @ A))
    return (b0 + Z @ B)[0, 0]


def winner(map_):
    for i in range(0, 3):
        if map_[i, 0] == map_[i, 1] == map_[i, 2] != -1 != 2:
            return map_[i, 0]
        if map_[0, i] == map_[1, i] == map_[2, i] != -1 != 2:
            return map_[0, i]
    if map_[0, 0] == map_[1, 1] == map_[2, 2] != -1 != 2:
        return map_[0, 0]
    if map_[2, 0] == map_[1, 1] == map_[0, 2] != -1 != 2:
        return map_[2, 0]
    return -1


def is_leaf(map_):
    if winner(map_) != -1:
        return True
    for i in range(3):
        for j in range(3):
            if map_[i, j] == -1:
                return False
    return True


def get_index(map_):
    k = 0
    num = 0
    for i in range(3):
        for j in range(3):
            num += (map_[i, j]+1)*(3**k)
            k += 1
    return num


g = []
for i in t.split('|'):
    if i[0] in '0123456789':
        g.append(tuple(i.split('-')))
    else:
        for j in range(len(i)):
            if i[j] == 'X':
                g.append(('1000', '0'))
            elif i[j] == 'N':
                g.append(('0', '1000'))
            elif i[j] == 'S':
                g.append(('0', '0'))
            else:
                g.append(tuple(i[j:].split('-')))
                break
current = 0
gg = [(-1, -1)]*19683
for ind in range(19683):
    if gg[ind][0] == -1:
        MAP_ = get_map_(ind)
        MAP_D = copy.deepcopy(get_map_(ind))
        for i in range(3):
            for j in range(3):
                if MAP_[i, j] == 0:
                    MAP_D[i, j] = 1
                if MAP_[i, j] == 1:
                    MAP_D[i, j] = 0
        for i in range(4):
            gg[get_index(MAP_)] = float(g[current][0])/1000, float(g[current][1])/1000
            MAP_ = copy.deepcopy(np.rot90(MAP_))
            gg[get_index(MAP_D)] = float(g[current][1])/1000, float(g[current][0])/1000
            MAP_D = copy.deepcopy(np.rot90(MAP_D))
        MAP_ = copy.deepcopy(np.flip(MAP_, 0))
        MAP_D = copy.deepcopy(np.flip(MAP_D, 0))
        for i in range(4):
            gg[get_index(MAP_)] = float(g[current][0])/1000, float(g[current][1])/1000
            MAP_ = copy.deepcopy(np.rot90(MAP_))
            gg[get_index(MAP_D)] = float(g[current][1])/1000, float(g[current][0])/1000
            MAP_D = copy.deepcopy(np.rot90(MAP_D))
        current += 1


class Game3:
    def __init__(self):
        self.chances = gg
        self.Xw = None
        self.Ow = None
        self.N = None
        self.map_ = np.array([[-1, -1, -1, -1, -1, -1, -1, -1, -1],
                              [-1, -1, -1, -1, -1, -1, -1, -1, -1],
                              [-1, -1, -1, -1, -1, -1, -1, -1, -1],
                              [-1, -1, -1, -1, -1, -1, -1, -1, -1],
                              [-1, -1, -1, -1, -1, -1, -1, -1, -1],
                              [-1, -1, -1, -1, -1, -1, -1, -1, -1],
                              [-1, -1, -1, -1, -1, -1, -1, -1, -1],
                              [-1, -1, -1, -1, -1, -1, -1, -1, -1],
                              [-1, -1, -1, -1, -1, -1, -1, -1, -1]])

        self.common_map = np.array([[-1, -1, -1],
                                    [-1, -1, -1],
                                    [-1, -1, -1]])

        self.X_chances = np.full((3, 3), 0.467)
        self.O_chances = np.full((3, 3), 0.483)

    def update_xo_chances(self, i, j):
        idx = get_index(self.map_[i * 3:(i + 1) * 3, j * 3:(j + 1) * 3])
        self.X_chances[i, j] = float(gg[idx][0])
        self.O_chances[i, j] = float(gg[idx][1])

    def step(self, opponent_row, opponent_col, list_of_action):
        if opponent_col != -1 and opponent_row != -1:
            self.map_[opponent_row, opponent_col] = 0
            self.update_xo_chances(opponent_row//3, opponent_col//3)
        if self.score(1, 2, list_of_action)[1] != None:
            best_row, best_col = self.score(1, 2, list_of_action)[1]
        else:
            best_row, best_col = list_of_action[0]
        self.map_[best_row, best_col] = 1
        a, b = best_row//3, best_col//3
        self.update_xo_chances(a, b)
        min_map = self.map_[3 * a:3 * (a + 1), 3 * b:3 * (b + 1)]
        self.common_map[a, b] = winner(min_map)
        return best_row, best_col

    def get_index(self, map_):
        return get_index(map_)

    def score(self, player, n, list_of_action):
        if n == 0:
            return get_common_chances(self.common_map, self.X_chances, self.O_chances), None
        else:
            best_step, best_score = None, None
            for row_col in list_of_action:
                i, j = row_col[0], row_col[1]
                a, b = i//3, j//3
                self.map_[i, j] = player
                old_Xw, old_Ow = self.X_chances[a, b], self.O_chances[a, b]
                self.update_xo_chances(a, b)
                min_map = self.map_[3 * a:3 * (a + 1), 3 * b:3 * (b + 1)]
                if is_leaf(min_map):
                    self.common_map[a, b] = winner(min_map)

                new_score = self.score(int(player == 0), n-1, self.get_list_of_action(i, j))[0]
                if (best_score is None or new_score > best_score) and player == 1:
                    best_step, best_score = (i, j), new_score
                if (best_score is None or new_score < best_score) and player != 1:
                    best_step, best_score = (i, j), new_score
                self.map_[i, j] = -1
                min_map = self.map_[3 * a:3 * (a + 1), 3 * b:3 * (b + 1)]
                if not is_leaf(min_map):
                    self.common_map[a, b] = -1
                self.X_chances[a, b], self.O_chances[a, b] = old_Xw, old_Ow
            return best_score, best_step


    def get_list_of_action(self, y, x):
        list_of_actions = []
        x = 3*(x % 3)
        y = 3*(y % 3)
        if self.common_map[y//3, x//3] == -1:
            for i in range(y, y+3):
                for j in range(x, x+3):
                    if self.map_[i, j] == -1:
                        list_of_actions.append((i, j))
        else:
            for i in range(9):
                for j in range(9):
                    if self.map_[i, j] == -1 and self.common_map[i // 3, j // 3] == -1:
                        list_of_actions.append((i, j))
        return list_of_actions


if __name__ == '__main__':
    game = Game2()
    while True:
        opponent_row, opponent_col = map(int, input().split())
        validActionCount = int(input())
        list_of_action = [([int(j) for j in input().split()])for i in range(validActionCount)]
        row, col = game.step(opponent_row, opponent_col, list_of_action)
        print(str(row)+' '+str(col))